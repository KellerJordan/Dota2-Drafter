<html>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<body>
	<div id="abc"></div>
</body>
<script>

//var enemyHeroes=["pudge","invoker","legion-commander"];

function getBestHeroes(pickedHeroes){
	$.post("winrateWriter.php",{
		data:JSON.stringify(pickedHeroes),
		type:"out"
	},
	function(data,status){
		console.log(JSON.parse(data));
	});
}

function updateHeroData(){getHeroData("pudge",true);}
var heroNames=[];
var index=0;

function getHeroData(hero,seed){
	$.ajax({
	    url: "http://www.dotabuff.com/heroes/"+hero+"/matchups?date=patch_6.87c",
	    dataType: 'text',
	    success: function(data){
	        var elements=$("<div>").html(data)[0].getElementsByTagName("tbody")[0].getElementsByTagName("tr");
	        var heroData=[];
	        for(i=0;i<elements.length;i++){
	        	var tds=elements[i].getElementsByTagName("td");
	        	var heroName=$(tds[0]).attr("data-value").toLowerCase().replace(/\s/g, "-").replace(/'/g, '');
	        	var heroAdvantage=parseFloat($(tds[2]).attr("data-value"));
	        	heroData.push({name:heroName,advantage:heroAdvantage});
	        	if(seed){
	        		heroNames.push(heroName);
	        	}
	        }
	        $.post("winrateWriter.php",{
	        	data:JSON.stringify(heroData),type:"out",name:hero
	        },function(data,success){
	        	if(index<111){
	        		getHeroData(heroNames[index],false);
	        		index++;
	        	}
	        }
	        );
	    }
	});
}

</script>
</html>